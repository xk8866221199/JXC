# JXC系统前后端分离开发计划

## 🚀 总体策略
**决策**: 前后端完全分离，各自独立开发  
**优势**: 专业分工、独立进度、技术聚焦、风险控制  
**建议**: 先完成前端改造，再开发后端API

---

# 📱 前端改造详细执行计划

## 🎯 前端改造策略
**技术栈**: Vue 3.4+ + TypeScript 5.0+ + Ant Design Vue 4.0  
**改造周期**: 8-10周  
**人员配置**: 前端开发1人

## 📋 详细执行步骤

### 第一阶段：技术栈升级 (1-2周)

#### 步骤1：添加TypeScript支持 (1-2天)
```bash
# 1. 安装TypeScript依赖
npm install -D typescript @types/node vue-tsc

# 2. 创建tsconfig.json配置
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "preserve",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"],
  "references": [{ "path": "./tsconfig.node.json" }]
}

# 3. 更新vite.config.js为vite.config.ts
# 4. 重命名main.js为main.ts
# 5. 更新index.html中的入口文件引用
```

#### 步骤2：卸载Element Plus，安装Ant Design Vue (2-3天)
```bash
# 1. 卸载Element Plus
npm uninstall element-plus @element-plus/icons-vue

# 2. 安装Ant Design Vue
npm install ant-design-vue @ant-design/icons-vue @ant-design/colors dayjs

# 3. 更新main.ts
import { createApp } from 'vue'
import Antd from 'ant-design-vue'
import 'ant-design-vue/dist/reset.css'

const app = createApp(App)
app.use(Antd)

# 4. 配置主题色彩
```

#### 步骤3：配置UnoCSS原子化CSS (1天)
```bash
# 1. 安装UnoCSS
npm install -D unocss @unocss/preset-ant-design @unocss/preset-uno

# 2. 创建uno.config.ts
import { defineConfig, presetAntDesign, presetUno } from 'unocss'

export default defineConfig({
  presets: [
    presetUno(),
    presetAntDesign()
  ]
})

# 3. 配置vite.config.ts
import UnoCSS from 'unocss/vite'

export default defineConfig({
  plugins: [vue(), UnoCSS()]
})

# 4. 在main.ts中导入
import 'virtual:uno.css'
```

#### 步骤4：升级Pinia并添加数据持久化 (1天)
```bash
# 1. 安装持久化插件
npm install pinia-plugin-persistedstate

# 2. 配置main.ts
import { createPinia } from 'pinia'
import piniaPluginPersistedstate from 'pinia-plugin-persistedstate'

const pinia = createPinia()
pinia.use(piniaPluginPersistedstate)
app.use(pinia)

# 3. 更新user store
export const useUserStore = defineStore('user', () => {
  // state
  const token = ref<string>('')
  const userInfo = ref<UserInfo | null>(null)
  
  // actions
  const setToken = (val: string) => {
    token.value = val
  }
  
  return { token, userInfo, setToken }
}, {
  persist: true
})
```

### 第二阶段：核心页面重构 (1-2周)

#### 步骤5：重构登录页面 (2-3天)
- 使用Ant Design Vue的a-form、a-input、a-button组件
- 添加TypeScript接口定义
- 优化响应式布局和视觉效果
- 重构登录逻辑和表单验证

#### 步骤6：重构主布局和导航 (2-3天)
- 使用a-layout、a-sider、a-header、a-menu组件
- 重构侧边栏菜单和顶部导航
- 添加面包屑导航
- 优化响应式适配

#### 步骤7：重构仪表盘页面 (2天)
- 使用a-card、a-table、a-statistic组件
- 优化数据展示和加载状态
- 添加响应式网格布局

### 第三阶段：业务页面开发 (3-4周)

#### 步骤8：开发商品管理页面 (4-5天)
**商品列表页面功能**:
- 高级搜索和筛选 (a-form + a-input + a-select)
- 数据表格展示 (a-table + 分页 + 排序)
- 批量操作功能 (a-button + row-selection)
- 新增/编辑弹窗 (a-modal + a-form)

**商品分类管理**:
- 树形分类结构 (a-tree)
- 拖拽排序功能
- 分类的增删改操作

#### 步骤9：开发库存管理页面 (4-5天)
**库存查询页面**:
- 多维度筛选查询
- 库存预警显示
- 数据导出功能

**库存盘点页面**:
- 盘点计划创建
- 盘点数据录入
- 差异分析报告

#### 步骤10-13：其他业务模块 (2-3周)
- **采购管理**: 采购订单、供应商管理
- **销售管理**: 销售订单、客户管理  
- **系统管理**: 用户管理、角色管理
- **财务管理**: 应收应付、财务记录

### 第四阶段：数据可视化 (1周)

#### 步骤14：集成Vue-ECharts图表 (2-3天)
```bash
# 1. 安装依赖
npm install echarts vue-echarts

# 2. 创建图表组件
import { use } from 'echarts/core'
import { CanvasRenderer } from 'echarts/renderers'
import { BarChart, LineChart, PieChart } from 'echarts/charts'
import VChart from 'vue-echarts'

use([CanvasRenderer, BarChart, LineChart, PieChart])

# 3. 开发常用图表类型
- 柱状图 (销售统计)
- 折线图 (趋势分析)  
- 饼图 (分类占比)
- 仪表盘 (KPI指标)
```

#### 步骤15：开发数据报表页面 (3-4天)
**销售报表**:
- 日销售统计图表
- 商品销售排行榜
- 客户消费分析

**库存报表**:
- 库存变动趋势
- 库存预警统计
- 滞销商品分析

**财务报表**:
- 收支统计图表
- 利润分析趋势
- 应收应付统计

### 第五阶段：优化与测试 (1周)

#### 步骤16：代码规范和性能优化 (2-3天)
```bash
# 1. 代码规范工具
npm install -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
npm install -D prettier eslint-config-prettier eslint-plugin-prettier

# 2. 性能优化
- 路由懒加载配置
- 组件按需导入
- 图片懒加载
- 虚拟滚动优化

# 3. 代码分割
const routes = [
  {
    path: '/goods',
    component: () => import('@/views/goods/GoodsList.vue')
  }
]
```

#### 步骤17：添加单元测试 (2-3天)
```bash
# 1. 安装测试工具
npm install -D vitest @vue/test-utils jsdom

# 2. 配置vitest.config.ts
# 3. 编写组件测试用例
# 4. 编写工具函数测试
```

#### 步骤18：构建优化和部署准备 (2-3天)
```bash
# 1. Vite构建配置优化
export default defineConfig({
  build: {
    target: 'es2015',
    minify: 'terser',
    rollupOptions: {
      output: {
        chunkFileNames: 'js/[name]-[hash].js',
        entryFileNames: 'js/[name]-[hash].js',
        assetFileNames: '[ext]/[name]-[hash].[ext]'
      }
    }
  }
})

# 2. 环境变量配置
- .env.development
- .env.production
- .env.test

# 3. Docker镜像构建
# 4. Nginx配置文件
```

## ✅ 验收标准

### 第一阶段验收
- [ ] 项目可以正常启动
- [ ] TypeScript编译无错误  
- [ ] Ant Design Vue组件正常显示
- [ ] UnoCSS样式生效
- [ ] Pinia状态管理正常

### 第二阶段验收
- [ ] 登录页面样式美观，功能正常
- [ ] 主布局响应式设计良好
- [ ] 仪表盘数据展示清晰
- [ ] 所有页面TypeScript类型正确

### 第三阶段验收
- [ ] 所有业务模块功能完整
- [ ] 数据CRUD操作正常
- [ ] 表单验证完善
- [ ] 错误处理和用户提示完善

### 第四阶段验收
- [ ] 图表显示美观，交互流畅
- [ ] 报表数据准确，功能完整
- [ ] 页面加载速度提升

### 第五阶段验收
- [ ] 测试覆盖率达到80%以上
- [ ] 构建包体积优化
- [ ] 生产环境配置完善
- [ ] 部署文档完整

## 🔄 风险控制

### 技术风险
- **迁移风险**: 分步骤渐进式升级，保持功能可用
- **兼容性风险**: 充分测试各个浏览器和设备
- **性能风险**: 持续监控和优化

### 进度风险
- **开发延期**: 合理评估任务复杂度，留有缓冲时间
- **需求变更**: 及时沟通，控制范围蔓延

## 📞 下一步行动
建议从**第一阶段的步骤1：添加TypeScript支持**开始执行！

---
**执行日期**: 待定  
**负责人**: 前端开发团队  
**项目路径**: /Users/xukai/Documents/CODE/JXC