# JXC进销存系统 - 本地开发环境配置指南

## 🎯 概述

本指南将详细介绍如何在本地macOS环境（darwin 26.0）上配置JXC进销存管理系统的完整开发环境，包括MySQL、Redis等必需服务的安装和配置。

## 📋 系统要求

### 基础环境
- **操作系统**: macOS (darwin 26.0) ✅ 已确认
- **Shell环境**: /bin/zsh ✅ 已确认  
- **开发工具**: Qoder IDE 0.1.23 ✅ 已确认

### 软件版本要求
- **Node.js**: 18+ (推荐18.17.0+)
- **Java**: JDK 17+ (推荐17.0.7+)
- **MySQL**: 8.0+
- **Redis**: 7.0+
- **Homebrew**: 最新版本

## 🛠️ 安装步骤

### 1. 安装Homebrew（如果尚未安装）

```bash
# 检查是否已安装
brew --version

# 如果未安装，执行以下命令
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 配置环境变量（添加到 ~/.zshrc）
echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zshrc
source ~/.zshrc
```

### 2. 安装Java JDK 17

```bash
# 安装OpenJDK 17
brew install openjdk@17

# 配置JAVA_HOME环境变量
echo 'export JAVA_HOME=$(/usr/libexec/java_home -v 17)' >> ~/.zshrc
echo 'export PATH=$JAVA_HOME/bin:$PATH' >> ~/.zshrc
source ~/.zshrc

# 验证安装
java --version
javac --version
```

### 3. 安装Node.js

```bash
# 安装Node.js（推荐使用nvm管理版本）
brew install nvm

# 配置nvm环境变量
echo 'export NVM_DIR="$HOME/.nvm"' >> ~/.zshrc
echo '[ -s "/opt/homebrew/opt/nvm/nvm.sh" ] && \. "/opt/homebrew/opt/nvm/nvm.sh"' >> ~/.zshrc
echo '[ -s "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm" ] && \. "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm"' >> ~/.zshrc
source ~/.zshrc

# 安装并使用Node.js 18
nvm install 18
nvm use 18
nvm alias default 18

# 验证安装
node --version
npm --version
```

### 4. 安装MySQL 8.0

```bash
# 安装MySQL 8.0
brew install mysql@8.0

# 启动MySQL服务
brew services start mysql@8.0

# 安全配置（设置root密码等）
mysql_secure_installation

# 配置环境变量
echo 'export PATH="/opt/homebrew/opt/mysql@8.0/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc

# 连接MySQL并创建数据库
mysql -u root -p
CREATE DATABASE jxc_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'jxc_user'@'localhost' IDENTIFIED BY 'jxc_password';
GRANT ALL PRIVILEGES ON jxc_db.* TO 'jxc_user'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

### 5. 安装Redis 7.0

```bash
# 安装Redis
brew install redis

# 启动Redis服务
brew services start redis

# 验证Redis安装
redis-cli ping

# 配置Redis密码（可选）
redis-cli
CONFIG SET requirepass "123456"
CONFIG REWRITE
EXIT
```

### 6. 安装Maven

```bash
# 安装Maven
brew install maven

# 验证安装
mvn --version
```

## 🔧 项目配置

### 1. 数据库初始化

```bash
# 进入项目目录
cd /Users/xukai/Documents/CODE/JXC

# 执行初始化脚本
mysql -u root -p jxc_db < sql/init/01_create_tables.sql
mysql -u root -p jxc_db < sql/init/02_init_data.sql
```

### 2. 后端项目配置

```bash
# 进入后端项目目录
cd jxc-backend

# 检查配置文件
cat src/main/resources/application-dev.yml

# 根据实际情况修改数据库连接信息
# MySQL配置（如果使用非默认配置）
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/jxc_db?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&serverTimezone=GMT%2B8&allowPublicKeyRetrieval=true
    username: root  # 或 jxc_user
    password: 123456  # 你的实际密码

# Redis配置
  redis:
    host: localhost
    port: 6379
    password: 123456  # 如果设置了密码

# 编译并运行后端服务
mvn clean compile
mvn spring-boot:run

# 验证后端服务
curl http://localhost:8080/api/test/health
```

### 3. 前端项目配置

```bash
# 进入前端项目目录
cd jxc-frontend

# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 验证前端服务
open http://localhost:5173
```

## 🚀 服务启动顺序

### 完整启动流程

```bash
# 1. 启动基础服务
cd /Users/xukai/Documents/CODE/JXC
brew services start mysql@8.0
brew services start redis

# 2. 启动后端服务
cd jxc-backend
mvn spring-boot:run &

# 3. 启动前端服务
cd ../jxc-frontend
npm run dev

# 4. 验证所有服务
echo "检查服务状态..."
curl -f http://localhost:8080/api/test/health && echo "✅ 后端服务正常"
curl -f http://localhost:5173 && echo "✅ 前端服务正常"
brew services list | grep -E "(mysql|redis)" && echo "✅ 数据库服务正常"
```

## 🔍 故障排除

### MySQL连接问题

```bash
# 检查MySQL服务状态
brew services list | grep mysql

# 查看MySQL日志
tail -f /opt/homebrew/var/mysql/$(hostname).err

# 测试数据库连接
mysql -h localhost -P 3306 -u root -p123456 -e "SHOW DATABASES;"
```

### Redis连接问题

```bash
# 检查Redis服务状态
brew services list | grep redis

# 测试Redis连接
redis-cli -h localhost -p 6379 -a 123456 ping
```

### 后端服务问题

```bash
# 检查Java环境
java --version

# 检查Maven配置
mvn --version

# 查看后端服务日志
cd jxc-backend
mvn spring-boot:run

# 检查端口占用
lsof -i :8080
```

### 前端服务问题

```bash
# 检查Node.js环境
node --version
npm --version

# 清理并重新安装依赖
cd jxc-frontend
rm -rf node_modules package-lock.json
npm install

# 检查端口占用
lsof -i :5173
```

## 🔐 默认账户信息

### 系统登录账户
- **用户名**: admin
- **密码**: 123456
- **角色**: 系统管理员

### 数据库连接信息
- **MySQL**: localhost:3306
- **数据库**: jxc_db
- **用户名**: root / jxc_user
- **密码**: 123456 / jxc_password

### Redis连接信息
- **主机**: localhost:6379
- **密码**: 123456

## 📱 访问地址

### 开发环境地址
- **前端应用**: http://localhost:5173
- **后端API**: http://localhost:8080/api
- **API文档**: http://localhost:8080/swagger-ui/index.html
- **健康检查**: http://localhost:8080/api/test/health

### 数据库管理工具
```bash
# 推荐安装数据库管理工具
brew install --cask sequel-pro     # MySQL GUI工具
brew install --cask redis-pro      # Redis GUI工具
# 或使用Web版本
# MySQL: phpMyAdmin
# Redis: RedisInsight
```

## 🚦 性能优化建议

### 开发环境优化

```bash
# 1. 增加Node.js内存限制
export NODE_OPTIONS="--max-old-space-size=4096"

# 2. Maven编译优化
export MAVEN_OPTS="-Xmx2g -XX:ReservedCodeCacheSize=512m"

# 3. MySQL配置优化（/etc/mysql/my.cnf）
[mysqld]
innodb_buffer_pool_size = 256M
max_connections = 100
query_cache_size = 64M

# 4. Redis配置优化
maxmemory 256mb
maxmemory-policy allkeys-lru
```

## 🔄 日常开发工作流

### 启动开发环境
```bash
# 一键启动脚本 (保存为 start-dev.sh)
#!/bin/bash
echo "🚀 启动JXC开发环境..."

# 启动基础服务
cd /Users/xukai/Documents/CODE/JXC
brew services start mysql@8.0
brew services start redis

# 等待服务启动
sleep 10

# 启动后端服务（后台运行）
cd jxc-backend
nohup mvn spring-boot:run > backend.log 2>&1 &

# 启动前端服务
cd ../jxc-frontend
npm run dev
```

### 停止开发环境
```bash
# 停止脚本 (保存为 stop-dev.sh)
#!/bin/bash
echo "🛑 停止JXC开发环境..."

# 停止前端服务（Ctrl+C手动停止）
# 停止后端服务
pkill -f "spring-boot:run"

# 停止基础服务
brew services stop mysql@8.0
brew services stop redis

echo "✅ 所有服务已停止"
```

---

**配置完成后，您就可以开始JXC进销存系统的本地开发了！** 🎉

如果遇到任何问题，请参考故障排除部分或查看相关服务的日志文件。